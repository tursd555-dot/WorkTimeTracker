# Инструкция по сборке WorkTimeTracker для Windows

## Быстрый старт

### 1. Установка зависимостей

```bash
pip install pyinstaller
pip install -r requirements.txt
```

### 2. Сборка всех компонентов

```bash
python build_windows.py
```

После выполнения вы получите:
- Папку `dist/` с 4 приложениями
- ZIP архив `WorkTimeTracker_Windows_YYYYMMDD_HHMMSS.zip` со всеми приложениями

### 3. Сборка отдельного компонента

```bash
python build_single.py user      # Пользовательская часть
python build_single.py admin     # Админка
python build_single.py monitor   # Реал тайм монитор
python build_single.py bot       # Телеграм бот
```

## Что собирается

1. **WorkTimeTracker_User** - Приложение для сотрудников
   - Работа со статусами
   - Учет времени
   - Перерывы и обеды
   - Синхронизация с сервером

2. **WorkTimeTracker_Admin** - Админ-панель
   - Управление сотрудниками
   - Графики работы
   - Управление перерывами
   - Отчеты

3. **WorkTimeTracker_Monitor** - Мониторинг в реальном времени
   - Статусы всех сотрудников
   - Время в системе
   - Активные перерывы
   - Предупреждения о превышении лимитов

4. **WorkTimeTracker_Bot** - Телеграм бот
   - Привязка телеграм аккаунтов
   - Уведомления сотрудникам

## Использование собранных приложений

### Пользовательская часть
1. Распакуйте архив или скопируйте папку `WorkTimeTracker_User`
2. Запустите `WorkTimeTracker_User.exe`
3. Приложение работает автономно, не требует установки

### Админка
1. Распакуйте папку `WorkTimeTracker_Admin`
2. Запустите `WorkTimeTracker_Admin.exe`
3. Убедитесь, что `config.py` настроен правильно

### Монитор
1. Распакуйте папку `WorkTimeTracker_Monitor`
2. Запустите `WorkTimeTracker_Monitor.exe`
3. Окно мониторинга обновляется автоматически

### Телеграм бот
1. Распакуйте папку `WorkTimeTracker_Bot`
2. Настройте `TELEGRAM_BOT_TOKEN` в `.env` или `config.py`
3. Запустите `WorkTimeTracker_Bot.exe`
4. Бот работает в консольном режиме

## Особенности

✅ **Работа без прав администратора** - все приложения portable
✅ **Не требует установки Python** - все зависимости включены
✅ **Готово к отправке** - один ZIP архив со всеми приложениями
✅ **Работает из коробки** - просто запустите EXE файл

## Структура собранного приложения

```
WorkTimeTracker_User/
├── WorkTimeTracker_User.exe    # Главный файл
└── _internal/                   # Все зависимости
    ├── python310.dll
    ├── PyQt5/
    ├── gspread/
    └── ...
```

## Требования

- Windows 10/11
- Python 3.10+ (только для сборки)
- PyInstaller (устанавливается через pip)

## Устранение проблем

### Ошибка "ModuleNotFoundError"
Добавьте модуль в `COMMON_HIDDEN_IMPORTS` в `build_windows.py` и пересоберите.

### Большой размер EXE
Это нормально для PyQt5 приложений (50-150 MB). Можно использовать `--onefile`, но запуск будет медленнее.

### Антивирус блокирует
Добавьте папку в исключения антивируса. PyInstaller иногда вызывает ложные срабатывания.

## Логи

Все логи сборки сохраняются в `build_all.log`. При проблемах проверьте этот файл.
