# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 4 —Ç–∏–ø–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram:

1. **–°–ª—É–∂–µ–±–Ω—ã–µ (service)** - –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π —á–∞—Ç (`TELEGRAM_ADMIN_CHAT_ID`)
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ (personal)** - –≤ –ª–∏—á–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–ø–æ email, chat_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Users)
3. **–ì—Ä—É–ø–ø–æ–≤—ã–µ (group/broadcast)** - –≤ –æ–±—â–∏–π —á–∞—Ç (`TELEGRAM_BROADCAST_CHAT_ID`)
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (monitoring)** - –≤ —á–∞—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (`TELEGRAM_MONITORING_CHAT_ID`)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
telegram_bot/notifier.py  ‚Üí TelegramNotifier (–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)
    ‚Üì
telegram_api.py           ‚Üí TelegramAPI (–æ–±—ë—Ä—Ç–∫–∞)
    ‚Üì
shared/break_notifications.py ‚Üí –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–µ—Ä–µ—Ä—ã–≤–∞—Ö
    ‚Üì
notifications/engine.py   ‚Üí –î–≤–∏–∂–æ–∫ –ø—Ä–∞–≤–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

### TelegramNotifier

**–ú–µ—Ç–æ–¥—ã:**
- `send_service(text, silent=False)` - —Å–ª—É–∂–µ–±–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É
- `send_personal(email, text, silent=False)` - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `send_group(text, group=None, for_all=False, silent=False)` - –≥—Ä—É–ø–ø–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `send_monitoring(text, silent=False)` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–Ω—Ç–∏-—Å–ø–∞–º: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (`TELEGRAM_MIN_INTERVAL_SEC`)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ chat_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Users (TTL 5 –º–∏–Ω—É—Ç)
- –ê—É–¥–∏—Ç –≤ –ª–∏—Å—Ç `NotificationsLog` –≤ Google Sheets
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTML —Ä–∞–∑–º–µ—Ç–∫–∏
- –¢–∏—Ö–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–±–µ–∑ –∑–≤—É–∫–∞)

### TelegramAPI

–£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `TelegramNotifier`:

- `send_to_user(email, message, silent=False)` ‚Üí `send_personal()`
- `send_to_admin_group(message, silent=False)` ‚Üí `send_monitoring()`
- `send_to_monitoring(message, silent=False)` ‚Üí `send_monitoring()`
- `send_service(message, silent=False)` ‚Üí `send_service()`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
TELEGRAM_ADMIN_CHAT_ID=1053909260              # –õ–∏—á–Ω—ã–π —á–∞—Ç –∞–¥–º–∏–Ω–∞
TELEGRAM_BROADCAST_CHAT_ID=-1001234567890      # –û–±—â–∏–π –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
TELEGRAM_MONITORING_CHAT_ID=-1002917784307     # –ß–∞—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_MIN_INTERVAL_SEC=600                   # –ê–Ω—Ç–∏-—Å–ø–∞–º (—Å–µ–∫—É–Ω–¥—ã)
TELEGRAM_SILENT=0                               # –¢–∏—Ö–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (0/1)
```

### config.py

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤ `config.py`:

```python
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
TELEGRAM_ADMIN_CHAT_ID = os.getenv("TELEGRAM_ADMIN_CHAT_ID")
TELEGRAM_BROADCAST_CHAT_ID = os.getenv("TELEGRAM_BROADCAST_CHAT_ID")
TELEGRAM_MONITORING_CHAT_ID = os.getenv("TELEGRAM_MONITORING_CHAT_ID")
TELEGRAM_MIN_INTERVAL_SEC = int(os.getenv("TELEGRAM_MIN_INTERVAL_SEC", "600"))
TELEGRAM_SILENT = os.getenv("TELEGRAM_SILENT", "0") == "1"
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ ‚Üí –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Üí config.py

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 1. –°–ª—É–∂–µ–±–Ω—ã–µ (service)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

**–ö—É–¥–∞:** `TELEGRAM_ADMIN_CHAT_ID`

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (`sync/service_alerts.py`)
- –ü—Ä–æ–±–ª–µ–º—ã —Å –æ—á–µ—Ä–µ–¥—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```python
from telegram_bot.notifier import TelegramNotifier

notifier = TelegramNotifier()
notifier.send_service("üõ†Ô∏è –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: timeout", silent=False)
```

### 2. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ (personal)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–ö—É–¥–∞:** –õ–∏—á–Ω—ã–π —á–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (chat_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Users)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ email –∏—â–µ—Ç—Å—è chat_id –≤ —Ç–∞–±–ª–∏—Ü–µ `Users`
2. –ö–æ–ª–æ–Ω–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞: `Telegram`, `TelegramChatID`, `tg`
3. –ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–µ—Ä–µ—Ä—ã–≤–∞ (`shared/break_notifications.py`)
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ—Ä—ã–≤–æ–≤
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–µ—Ä–µ—Ä—ã–≤–∞—Ö

**–ü—Ä–∏–º–µ—Ä:**
```python
from telegram_api import TelegramAPI

api = TelegramAPI()
api.send_to_user("user@example.com", "‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ—Ä—ã–≤–∞", silent=False)
```

**–í–∞–∂–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω:
1. –ù–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`
2. –ò–º–µ—Ç—å chat_id –≤ —Ç–∞–±–ª–∏—Ü–µ Users

### 3. –ì—Ä—É–ø–ø–æ–≤—ã–µ (group/broadcast)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –æ–±—â–∏–π —á–∞—Ç

**–ö—É–¥–∞:** `TELEGRAM_BROADCAST_CHAT_ID`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ `[–ì—Ä—É–ø–ø–∞]` –∏–ª–∏ `[–í—Å–µ]`
- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≥—Ä—É–ø–ø—É –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º

**–ü—Ä–∏–º–µ—Ä:**
```python
from telegram_bot.notifier import TelegramNotifier

notifier = TelegramNotifier()
# –° –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –≥—Ä—É–ø–ø—ã
notifier.send_group("–û–±—ä—è–≤–ª–µ–Ω–∏–µ", group="–í—Ö–æ–¥—è—â–∏–µ", silent=False)
# –î–ª—è –≤—Å–µ—Ö
notifier.send_group("–í–∞–∂–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ", for_all=True, silent=False)
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (monitoring)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö

**–ö—É–¥–∞:** `TELEGRAM_MONITORING_CHAT_ID`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ë–µ–∑ –∞–Ω—Ç–∏-—Å–ø–∞–º–∞** - –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Ç–∏—Ö–∏–µ (`silent=False`)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ—Ä—ã–≤–æ–≤ (`notifications/engine.py`)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª

**–ü—Ä–∏–º–µ—Ä:**
```python
from telegram_bot.notifier import TelegramNotifier

notifier = TelegramNotifier()
notifier.send_monitoring(
    "‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ—Ä—ã–≤–∞\n–°–æ—Ç—Ä—É–¥–Ω–∏–∫: user@example.com\n–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ: +5 –º–∏–Ω—É—Ç",
    silent=False
)
```

## –£—Å–ª–æ–≤–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏

### –ê–Ω—Ç–∏-—Å–ø–∞–º

–í—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∫—Ä–æ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞) –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç —Å–ø–∞–º–∞:

- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª: `TELEGRAM_MIN_INTERVAL_SEC` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 600 —Å–µ–∫ = 10 –º–∏–Ω—É—Ç)
- –ö–ª—é—á –∞–Ω—Ç–∏-—Å–ø–∞–º–∞: `{type}:{identifier}:{hash(text)}`
- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –Ω–µ–¥–∞–≤–Ω–æ - –æ–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:** `send_monitoring()` **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** –∞–Ω—Ç–∏-—Å–ø–∞–º, —á—Ç–æ–±—ã –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–∞–≤–ª—è–ª–∏—Å—å.

### –¢–∏—Ö–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü–∞—Ä–∞–º–µ—Ç—Ä `silent` —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–≤—É–∫–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

- `silent=False` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –æ–±—ã—á–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ –∑–≤—É–∫–æ–º
- `silent=True` - —Ç–∏—Ö–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –∑–≤—É–∫–∞

–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `TELEGRAM_SILENT=1`.

### –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ chat_id –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç
2. **–ü–æ–∏—Å–∫:** –í —Ç–∞–±–ª–∏—Ü–µ `Users` –∏—â—É—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∏: `Telegram`, `TelegramChatID`, `tg`
3. **–§–æ—Ä–º–∞—Ç:** Email –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –¥–ª—è –ø–æ–∏—Å–∫–∞

## –ê—É–¥–∏—Ç

–í—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ª–∏—Å—Ç `NotificationsLog` –≤ Google Sheets:

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| Ts | –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (ISO —Ñ–æ—Ä–º–∞—Ç) |
| Kind | –¢–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (service/personal/group/monitoring) |
| Target | –ü–æ–ª—É—á–∞—Ç–µ–ª—å (chat_id –∏–ª–∏ email) |
| Status | OK –∏–ª–∏ FAIL |
| Preview | –ü–µ—Ä–≤—ã–µ 180 —Å–∏–º–≤–æ–ª–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏—è |
| Error | –û—à–∏–±–∫–∞ (–µ—Å–ª–∏ –±—ã–ª–∞) |

–õ–∏—Å—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

```bash
# –¢–µ—Å—Ç –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∫—Ä–æ–º–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö)
python test_telegram_notifications.py --skip-personal

# –¢–µ—Å—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º
python test_telegram_notifications.py --email user@example.com

# –¢–æ–ª—å–∫–æ —Å–ª—É–∂–µ–±–Ω—ã–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
python test_telegram_notifications.py --skip-group --skip-personal
```

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

1. **`tools/tg_send_test.py`** - –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
2. **`dev-tools/test/test_telegram_send.py`** - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç
3. **`dev-tools/diagnostic/diagnose_telegram.py`** - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ CLI

```bash
# –°–ª—É–∂–µ–±–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
python tools/tg_send.py --type service --text "–¢–µ—Å—Ç"

# –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ
python tools/tg_send.py --type personal --email user@example.com --text "–¢–µ—Å—Ç"

# –ì—Ä—É–ø–ø–æ–≤–æ–µ
python tools/tg_send.py --type group --text "–¢–µ—Å—Ç" --all
```

## –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "TELEGRAM_BOT_TOKEN –Ω–µ –∑–∞–¥–∞–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `TELEGRAM_BOT_TOKEN`
- –ò–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤ `config.py`

### 2. "chat_id –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è email"

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª –±–æ—Ç—É `/start`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `Users` –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞ —Å chat_id (`Telegram`, `TelegramChatID` –∏–ª–∏ `tg`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ email —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω)

### 3. "TELEGRAM_BROADCAST_CHAT_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `TELEGRAM_BROADCAST_CHAT_ID` –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 4. –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
2. –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É (–¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤)
3. –£ –±–æ—Ç–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
4. Chat ID –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (–¥–ª—è –≥—Ä—É–ø–ø –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100`)
5. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 5. –ê–Ω—Ç–∏-—Å–ø–∞–º –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `send_monitoring()` –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–±–µ–∑ –∞–Ω—Ç–∏-—Å–ø–∞–º–∞)
- –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ `TELEGRAM_MIN_INTERVAL_SEC`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –ø–µ—Ä–µ—Ä—ã–≤–∞

```python
from shared.break_notifications import send_overtime_notification

send_overtime_notification(
    email="user@example.com",
    break_type="–ü–µ—Ä–µ—Ä—ã–≤",
    duration=20,  # –º–∏–Ω—É—Ç
    limit=15,     # –º–∏–Ω—É—Ç
    overtime=5    # –º–∏–Ω—É—Ç
)
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ—Ä—ã–≤–æ–≤

```python
from shared.break_notifications import send_quota_exceeded_notification

send_quota_exceeded_notification(
    email="user@example.com",
    break_type="–ü–µ—Ä–µ—Ä—ã–≤",
    used_count=5,
    limit_count=4
)
```

### –°–ª—É–∂–µ–±–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

```python
from sync.service_alerts import send_sync_error

send_sync_error("Timeout –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Google Sheets")
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –õ–æ–≥–∏: `~/.local/share/WorkTimeTracker/logs/` (Linux) –∏–ª–∏ `%APPDATA%\WorkTimeTracker\logs\` (Windows)
- –ê—É–¥–∏—Ç: –ª–∏—Å—Ç `NotificationsLog` –≤ Google Sheets
- –ö–æ–¥: `telegram_bot/notifier.py`, `telegram_api.py`, `shared/break_notifications.py`
