# Функционал вкладки "Отчеты" в админ-панели WorkTimeTracker

## Общее описание

Вкладка "Отчеты" предназначена для комплексного анализа рабочего времени сотрудников, их продуктивности, соблюдения графика перерывов и выявления проблемных зон. Система отчетов должна предоставлять гибкие инструменты фильтрации, группировки и визуализации данных с возможностью экспорта в различные форматы.

---

## 1. Структура интерфейса

### 1.1. Основные разделы

**Панель фильтров (слева или сверху):**
- Быстрые фильтры по периодам (сегодня, вчера, неделя, месяц, квартал, год, произвольный период)
- Фильтры по сотрудникам (выбор конкретных или всех)
- Фильтры по группам (выбор конкретных групп или всех)
- Фильтры по статусам работы
- Фильтры по типам перерывов
- Фильтры по нарушениям

**Область отчетов (центр):**
- Вкладки с различными типами отчетов
- Таблицы с данными
- Графики и диаграммы
- Сводные карточки с ключевыми метриками

**Панель действий (справа или снизу):**
- Кнопки экспорта (Excel, PDF, CSV)
- Кнопки печати
- Кнопки сохранения шаблонов отчетов
- Кнопки обновления данных

---

## 2. Типы отчетов

### 2.1. Отчет по группам

**Назначение:** Анализ рабочего времени и продуктивности по группам сотрудников.

**Отображаемые данные:**
- Название группы
- Количество сотрудников в группе
- Общее отработанное время (часы:минуты)
- Среднее время работы на сотрудника
- Процент продуктивного времени (статусы "В работе", "На задаче")
- Процент непродуктивного времени (статусы "Перерыв", "Обед", "Отсутствует")
- Количество нарушений графика перерывов
- Топ-3 сотрудника по продуктивности в группе
- Топ-3 сотрудника с наибольшим количеством нарушений

**Группировка:**
- По группам (основная группировка)
- Возможность детализации по сотрудникам внутри группы
- Возможность сравнения групп между собой

**Визуализация:**
- Столбчатая диаграмма: сравнение групп по общему времени работы
- Круговая диаграмма: распределение времени по статусам для каждой группы
- Линейный график: динамика продуктивности по дням/неделям
- Тепловая карта: активность по дням недели и часам дня

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных групп или всех
- Минимальный порог продуктивности для отображения
- Исключение неактивных сотрудников

---

### 2.2. Отчет по сотрудникам

**Назначение:** Детальный анализ работы конкретных сотрудников.

**Отображаемые данные:**
- ФИО сотрудника
- Email
- Группа
- Должность
- Общее отработанное время за период
- Распределение времени по статусам:
  - В работе (часы:минуты, процент)
  - На задаче (часы:минуты, процент)
  - Перерыв (часы:минуты, процент)
  - Обед (часы:минуты, процент)
  - Отсутствует (часы:минуты, процент)
  - Другое (часы:минуты, процент)
- Количество сессий работы
- Средняя длительность сессии
- Количество нарушений графика перерывов:
  - Вне окна времени
  - Превышение лимита
  - Превышение квоты
- Топ-5 дней с наибольшей продуктивностью
- Топ-5 дней с наименьшей продуктивностью
- График работы по дням недели
- График работы по часам дня

**Группировка:**
- По сотрудникам (основная группировка)
- Возможность детализации по дням
- Возможность детализации по сессиям

**Визуализация:**
- Линейный график: динамика продуктивности по дням
- Столбчатая диаграмма: распределение времени по статусам
- Круговая диаграмма: процентное соотношение статусов
- Тепловая карта: активность по дням недели и часам
- График нарушений: количество нарушений по дням

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных сотрудников или всех
- Выбор конкретных групп
- Минимальный порог отработанного времени
- Исключение сотрудников без активности

**Сравнение:**
- Возможность сравнения нескольких сотрудников между собой
- Таблица сравнения ключевых метрик
- График сравнения продуктивности

---

### 2.3. Отчет по типам статусов

**Назначение:** Анализ распределения времени по различным статусам работы.

**Отображаемые данные:**
- Название статуса
- Общее время в статусе (часы:минуты)
- Процент от общего рабочего времени
- Количество переходов в статус
- Средняя длительность пребывания в статусе
- Максимальная длительность пребывания в статусе
- Минимальная длительность пребывания в статусе
- Количество уникальных сотрудников, использовавших статус
- Топ-5 сотрудников по времени в статусе
- Распределение по дням недели
- Распределение по часам дня

**Группировка:**
- По типам статусов (основная группировка)
- Возможность детализации по сотрудникам
- Возможность детализации по дням

**Визуализация:**
- Круговая диаграмма: процентное распределение времени по статусам
- Столбчатая диаграмма: сравнение времени по статусам
- Линейный график: динамика использования статусов по дням
- Тепловая карта: использование статусов по дням недели и часам

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных статусов или всех
- Выбор конкретных сотрудников или групп
- Минимальный порог времени в статусе

**Категории статусов:**
- Продуктивные: "В работе", "На задаче"
- Перерывы: "Перерыв", "Обед"
- Непродуктивные: "Отсутствует", "Больничный", "Отпуск"
- Другие: все остальные статусы

---

### 2.4. Отчет по продуктивным статусам

**Назначение:** Анализ продуктивного времени работы сотрудников.

**Отображаемые данные:**
- Общее продуктивное время (статусы "В работе" + "На задаче")
- Процент продуктивного времени от общего рабочего времени
- Среднее продуктивное время на сотрудника
- Среднее продуктивное время на группу
- Количество продуктивных сессий
- Средняя длительность продуктивной сессии
- Распределение продуктивного времени по дням недели
- Распределение продуктивного времени по часам дня
- Топ-10 сотрудников по продуктивному времени
- Топ-10 групп по продуктивному времени
- Топ-10 дней с наибольшей продуктивностью
- График продуктивности по периодам (дни/недели/месяцы)

**Группировка:**
- По сотрудникам
- По группам
- По дням
- По неделям
- По месяцам

**Визуализация:**
- Линейный график: динамика продуктивности по дням/неделям/месяцам
- Столбчатая диаграмма: сравнение продуктивности сотрудников/групп
- Тепловая карта: продуктивность по дням недели и часам дня
- Круговая диаграмма: соотношение продуктивного и непродуктивного времени

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных сотрудников или групп
- Минимальный порог продуктивности
- Исключение неактивных сотрудников

**Метрики продуктивности:**
- Коэффициент продуктивности = (продуктивное время) / (общее рабочее время) × 100%
- Индекс эффективности = (продуктивное время) / (норма рабочего времени) × 100%
- Рейтинг продуктивности (ранжирование сотрудников/групп)

---

### 2.5. Отчет по нарушениям графика перерывов

**Назначение:** Анализ нарушений правил работы с перерывами.

**Отображаемые данные:**
- Общее количество нарушений за период
- Количество нарушений по типам:
  - Вне окна времени (OUT_OF_WINDOW)
  - Превышение лимита времени (OVER_LIMIT)
  - Превышение дневной квоты (QUOTA_EXCEEDED)
- Количество уникальных нарушителей
- Топ-10 нарушителей по количеству нарушений
- Топ-10 нарушителей по типу нарушения
- Распределение нарушений по дням недели
- Распределение нарушений по часам дня
- График динамики нарушений по дням/неделям/месяцам
- Среднее количество нарушений на сотрудника
- Среднее количество нарушений на группу

**Группировка:**
- По типам нарушений
- По сотрудникам
- По группам
- По дням
- По неделям
- По месяцам

**Визуализация:**
- Столбчатая диаграмма: количество нарушений по типам
- Линейный график: динамика нарушений по дням/неделям/месяцам
- Тепловая карта: нарушения по дням недели и часам дня
- Круговая диаграмма: распределение нарушений по типам

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных типов нарушений
- Выбор конкретных сотрудников или групп
- Минимальный порог количества нарушений

**Детализация:**
- Возможность просмотра детальной информации по каждому нарушению:
  - Дата и время нарушения
  - Сотрудник
  - Тип нарушения
  - Детали нарушения
  - Статус нарушения (pending, reviewed, resolved)

---

### 2.6. Отчет по перерывам

**Назначение:** Анализ использования перерывов сотрудниками.

**Отображаемые данные:**
- Общее количество перерывов за период
- Общее время в перерывах (часы:минуты)
- Среднее количество перерывов на сотрудника
- Средняя длительность перерыва
- Распределение перерывов по типам (Перерыв, Обед)
- Распределение перерывов по дням недели
- Распределение перерывов по часам дня
- Топ-10 сотрудников по количеству перерывов
- Топ-10 сотрудников по времени в перерывах
- График использования перерывов по дням/неделям/месяцам
- Соответствие графикам перерывов (сколько перерывов в рамках графика, сколько вне)

**Группировка:**
- По типам перерывов
- По сотрудникам
- По группам
- По дням
- По графикам перерывов

**Визуализация:**
- Столбчатая диаграмма: количество перерывов по типам
- Линейный график: динамика использования перерывов
- Тепловая карта: перерывы по дням недели и часам дня
- Круговая диаграмма: распределение перерывов по типам

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных типов перерывов
- Выбор конкретных сотрудников или групп
- Выбор конкретных графиков перерывов
- Только перерывы в рамках графика / только вне графика

---

### 2.7. Сравнительный отчет

**Назначение:** Сравнение показателей между сотрудниками, группами или периодами.

**Отображаемые данные:**
- Таблица сравнения ключевых метрик:
  - Общее рабочее время
  - Продуктивное время
  - Процент продуктивности
  - Количество нарушений
  - Количество перерывов
  - Средняя длительность сессии
- Графики сравнения:
  - Линейный график: сравнение продуктивности по дням
  - Столбчатая диаграмма: сравнение метрик
  - Радарная диаграмма: сравнение по нескольким параметрам

**Варианты сравнения:**
- Сотрудник vs Сотрудник
- Группа vs Группа
- Период vs Период (например, этот месяц vs прошлый месяц)
- Сотрудник vs Группа (средние показатели)
- Сотрудник vs Все сотрудники (средние показатели)

**Фильтры:**
- Выбор объектов для сравнения
- Период для каждого объекта сравнения
- Выбор метрик для сравнения

---

### 2.8. Отчет по сессиям работы

**Назначение:** Анализ сессий работы сотрудников.

**Отображаемые данные:**
- Общее количество сессий за период
- Средняя длительность сессии
- Максимальная длительность сессии
- Минимальная длительность сессии
- Распределение сессий по длительности (короткие < 1ч, средние 1-4ч, длинные > 4ч)
- Распределение сессий по времени начала (утро, день, вечер, ночь)
- Топ-10 самых длинных сессий
- График количества сессий по дням/неделям/месяцам
- График средней длительности сессий по дням/неделям/месяцам

**Группировка:**
- По сотрудникам
- По группам
- По дням
- По неделям
- По месяцам

**Визуализация:**
- Гистограмма: распределение сессий по длительности
- Линейный график: динамика количества сессий
- Линейный график: динамика средней длительности сессий
- Столбчатая диаграмма: распределение сессий по времени начала

**Фильтры:**
- Период (дата начала - дата окончания)
- Выбор конкретных сотрудников или групп
- Минимальная/максимальная длительность сессии
- Время начала сессии (утро/день/вечер/ночь)

---

## 3. Дополнительные функции

### 3.1. Экспорт отчетов

**Форматы экспорта:**
- Excel (.xlsx) - с форматированием, графиками, сводными таблицами
- PDF (.pdf) - для печати и архивирования
- CSV (.csv) - для дальнейшей обработки в других системах
- JSON (.json) - для программной обработки

**Опции экспорта:**
- Выбор диапазона данных (все данные или только видимые)
- Включение/исключение графиков
- Включение/исключение сводных таблиц
- Настройка формата дат и чисел
- Выбор кодировки (для CSV)

### 3.2. Сохранение шаблонов отчетов

**Функционал:**
- Сохранение текущих настроек фильтров и типа отчета как шаблона
- Название шаблона
- Описание шаблона
- Категория шаблона (личные, общие)
- Возможность поделиться шаблоном с другими администраторами

**Использование:**
- Быстрый доступ к сохраненным шаблонам через выпадающий список
- Загрузка шаблона с автоматическим применением всех настроек
- Редактирование и удаление шаблонов

### 3.3. Автоматическая отправка отчетов

**Функционал:**
- Настройка расписания автоматической генерации отчетов
- Выбор типа отчета и фильтров
- Выбор получателей (email, Telegram)
- Выбор формата экспорта
- Выбор частоты отправки (ежедневно, еженедельно, ежемесячно)

### 3.4. Интерактивные графики

**Функционал:**
- Масштабирование графиков (zoom in/out)
- Прокрутка по оси времени
- Наведение на точки графика для просмотра детальной информации
- Клик по элементу графика для перехода к детальным данным
- Переключение между типами графиков (линейный, столбчатый, круговая диаграмма)

### 3.5. Уведомления и алерты

**Функционал:**
- Настройка пороговых значений для метрик
- Автоматические уведомления при превышении порогов
- Примеры:
  - Продуктивность сотрудника ниже 50%
  - Количество нарушений превысило 10 за неделю
  - Средняя длительность сессии меньше 1 часа

---

## 4. Технические требования

### 4.1. Производительность

- Загрузка данных должна происходить асинхронно
- Использование пагинации для больших объемов данных
- Кэширование часто запрашиваемых данных
- Оптимизация запросов к базе данных
- Ленивая загрузка графиков (загружаются только при открытии вкладки)

### 4.2. Масштабируемость

- Поддержка работы с большим количеством сотрудников (1000+)
- Поддержка работы с большими периодами (год и более)
- Возможность агрегации данных на уровне базы данных

### 4.3. Безопасность

- Разграничение доступа к отчетам (только администраторы)
- Логирование всех действий с отчетами
- Защита персональных данных сотрудников
- Возможность анонимизации данных в отчетах

### 4.4. Удобство использования

- Интуитивно понятный интерфейс
- Подсказки и туториалы для новых пользователей
- Быстрый доступ к часто используемым отчетам
- Сохранение последних использованных фильтров
- Возможность отмены/повтора действий

---

## 5. Примеры использования

### 5.1. Анализ продуктивности группы за месяц

1. Выбрать отчет "По группам"
2. Установить период: начало месяца - конец месяца
3. Выбрать конкретную группу
4. Просмотреть метрики продуктивности
5. Детализировать по сотрудникам для выявления проблемных зон
6. Экспортировать отчет в Excel для презентации руководству

### 5.2. Выявление нарушителей графика перерывов

1. Выбрать отчет "По нарушениям"
2. Установить период: последняя неделя
3. Отсортировать по количеству нарушений
4. Просмотреть топ нарушителей
5. Детализировать по каждому нарушителю для понимания причин
6. Экспортировать список нарушителей для отправки руководителям групп

### 5.3. Сравнение продуктивности между периодами

1. Выбрать отчет "Сравнительный"
2. Выбрать тип сравнения: "Период vs Период"
3. Установить первый период: прошлый месяц
4. Установить второй период: текущий месяц
5. Выбрать метрики для сравнения: продуктивное время, процент продуктивности
6. Просмотреть графики сравнения
7. Сохранить отчет как шаблон для регулярного использования

---

## 6. Приоритеты реализации

### Фаза 1 (MVP - Минимально жизнеспособный продукт):
1. Отчет по сотрудникам (базовый функционал)
2. Отчет по группам (базовый функционал)
3. Отчет по типам статусов (базовый функционал)
4. Базовые фильтры (период, сотрудники, группы)
5. Экспорт в Excel

### Фаза 2 (Расширенный функционал):
1. Отчет по продуктивным статусам
2. Отчет по нарушениям
3. Отчет по перерывам
4. Базовые графики (линейные, столбчатые, круговые)
5. Сохранение шаблонов отчетов

### Фаза 3 (Продвинутый функционал):
1. Сравнительный отчет
2. Отчет по сессиям работы
3. Интерактивные графики
4. Тепловые карты
5. Экспорт в PDF и CSV

### Фаза 4 (Автоматизация):
1. Автоматическая отправка отчетов
2. Уведомления и алерты
3. Расширенные настройки экспорта
4. Аналитика и рекомендации

---

## 7. Метрики успеха

- Количество используемых отчетов в день/неделю/месяц
- Время генерации отчетов (должно быть < 5 секунд для стандартных отчетов)
- Количество сохраненных шаблонов
- Количество автоматически отправляемых отчетов
- Удовлетворенность пользователей (опросы, обратная связь)

---

Это описание функционала может быть расширено и адаптировано под конкретные потребности организации. Важно начать с MVP и постепенно добавлять функции на основе обратной связи пользователей.
